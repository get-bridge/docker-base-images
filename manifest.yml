# Example language specification

# foobar:
#   template_files:
#     - Dockerfile # automatically added if not included
#     - docker-bake.hcl # automatically added if not included
#     - .env
#   defaults:
#     sqlite_version: 3
#   versions:
#     '3':
#       sqlite_version: 2 # overrides the 3 from defaults above
#       additional_tags: foo:latest # Adds additonal tags to docker-bake.hcl
#     '4':
#clojure:
  #versions:
    #'11':
      #java_version: '11'
      #lein_version: '2.9.1'
      #package_sha: 'a4c239b407576f94e2fef5bfa107f0d3f97d0b19c253b08860d9609df4ab8b29'
      #jar_sha: 'ea7c831a4f5c38b6fc3926c6ad32d1d4b9b91bf830a715ecff5a70a18bda55f8'

# Define global defaults here, that apply to all images.
# Can be overriden by image specific defaults
globals:
  defaults:
    additional_tags: []
    base_image: ubuntu:jammy
    distribution: ubuntu
    distribution_code_name: jammy
    docker_syntax: docker/dockerfile:1.4  # https://hub.docker.com/r/docker/dockerfile
    ecr_registry: 127178877223.dkr.ecr.us-east-2.amazonaws.com
    tini_version: v0.19.0

############### Image definitions #################################

core:
  defaults:
    flavor: slim
  versions:
    jammy:
      latest: true # apply the latest tag to this version
    # Fat image has things like build-essential, and other libraries needed for compilation
    # This image should only be used via docker multi-stage build and not deployed, see README for details
    jammy-fat:
      flavor: fat

#java:
  #defaults:
    #base_image: get-bridge/core:jammy
  #versions:
    #'graalvm-11':
      #distro: jammy
      #flavor: jdk
      #java_version: 11
    #'11':
      #java_version: 11
      #flavor: jdk
    #'11-jre':
      #java_version: 11
      #flavor: jre

ruby:
  defaults:
    base_image: 127178877223.dkr.ecr.us-east-2.amazonaws.com/get-bridge/core:latest
    bundler_version: 2.3.14
    rubygems_version: 3.3.14
    flavor: slim
  versions:
    '2.7': &RUBY27
      ruby_major: 2.7
      ruby_version: 2.7.6
      ruby_download_sha256: 54dcd3044726c4ab75a9d4604720501442b229a3aed6a55fe909567da8807f24
    '2.7-fat':
      <<: *RUBY27
      flavor: fat
    '3.0': &RUBY30
      ruby_major: 3.0
      ruby_version: 3.0.4
      ruby_download_sha256: 8e22fc7304520435522253210ed0aa9a50545f8f13c959fe01a05aea06bef2f0
    '3.0-fat':
      <<: *RUBY30
      flavor: fat
    '3.1': &RUBY31
      ruby_major: 3.1
      ruby_version: 3.1.2
      ruby_download_sha256: ca10d017f8a1b6d247556622c841fc56b90c03b1803f87198da1e4fd3ec3bf2a
      latest: true # apply the latest tag
    '3.1-fat':
      <<: *RUBY31
      flavor: fat

node:
  defaults:
    base_image: 127178877223.dkr.ecr.us-east-2.amazonaws.com/get-bridge/core:latest
    npm_version: 2.3.14
    flavor: slim
  versions:
    '8.11': &NODE811
      node_major: 8.11
      node_version: 8.11.3
    '8.11-fat':
      <<: *NODE811
      flavor: fat
    '14.20': &NODE1420
      node_major: 14.20
      node_version: 14.20.0
    '14.20-fat':
      <<: *NODE1420
      flavor: fat
    # '3.1': &RUBY31
    #   ruby_major: 3.1
    #   ruby_version: 3.1.2
    #   ruby_download_sha256: ca10d017f8a1b6d247556622c841fc56b90c03b1803f87198da1e4fd3ec3bf2a
    #   latest: true # apply the latest tag
    # '3.1-fat':
    #   <<: *RUBY31
    #   flavor: fat
